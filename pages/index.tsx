import NewChannelPopup from "../components/NewChannelPopup";
import Head from 'next/head';
import { FiArrowRightCircle } from "react-icons/fi";
import { useState } from "react";
import { useRouter } from "next/router";

const Index = () =>{
  const [channelName, setChannelName] = useState<string>('');
  const router = useRouter();

  const handleChannelSubmit = (channelName: string) =>{
    const hasChannelName: boolean = channelName.replaceAll(' ', '').length != 0;
    if(hasChannelName){
      router.push(`/${channelName}`);
    }else{
      console.error('no channel name')
    }
  }

  return (
    <div className='index'>
      <Head>
        <title>Stream Vote</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, maximum-scale=1, maximum-scale=1.0, user-scalable=0" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className='index__input'>
        <input 
          className='input__text-input'
          type="text" 
          placeholder='Channel Name'
          value={channelName}
          onChange={(e: any)=>setChannelName(e.target.value)}
          onKeyDown={(e: any)=>e.key == 'Enter' ? handleChannelSubmit(channelName) : null}
          autoFocus={true}
        />
        <FiArrowRightCircle 
          className='input__confirm-icon'
          onClick={(e: any)=>handleChannelSubmit(channelName)}
        />
      </div>
    </div>
  );
}

export default Index;